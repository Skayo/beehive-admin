<script>
	import { headerBackground } from '@beehive/stores';
	// noinspection ES6UnusedImports
	import { link } from 'svelte-spa-router';
	// noinspection ES6UnusedImports
	import active from 'svelte-spa-router/active';
	// noinspection ES6UnusedImports
	import { fade } from 'svelte/transition';


	let showMenu = false;
</script>

<nav class="nav" class:inverted-color={$headerBackground} style={$headerBackground ? 'background-color:' + $headerBackground : ''}>
	<div class="nav-bar">
		<a href="/" use:link class="nav-left">
			<img class="nav-logo" src="/logo-512x512.png" alt="Logo" />
			<span class="nav-logo-text">Beehive</span>
		</a>

		<div class="nav-right space-x-8">
			<a href="/bees" use:link use:active={/^(\/|\/bees\/?.*)$/} title="Bees" class="nav-link active">Bees</a>
			<a href="/chains" use:link use:active={/^(\/chains\/?.*)$/} title="Chains" class="nav-link active">Chains</a>
			<a href="/hives" use:link use:active={/^(\/hives\/?.*)$/} title="Hives" class="nav-link active">Hives</a>
		</div>

		<button class="nav-burger" on:click={() => showMenu = !showMenu}>
			<svg width="30" height="30" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
			</svg>
		</button>
	</div>

	{#if showMenu}
		<div class="nav-menu" transition:fade>
			<a href="/bees" use:link use:active={/^(\/|\/bees\/?.*)$/} on:click={() => showMenu = false} title="Bees" class="nav-link nav-menu-link active">Bees</a>
			<a href="/chains" use:link use:active={/^(\/chains\/?.*)$/} on:click={() => showMenu = false} title="Chains" class="nav-link nav-menu-link active">Chains</a>
			<a href="/hives" use:link use:active={/^(\/hives\/?.*)$/} on:click={() => showMenu = false} title="Hives" class="nav-link nav-menu-link active">Hives</a>
		</div>
	{/if}
</nav>

<style>
	.nav {
		@apply py-6 px-10 flex-1;
	}

	.nav.inverted-color {
		@apply text-white;
	}


	.nav-bar {
		@apply flex justify-between items-center;
	}


	.nav-left {
		@apply h-10 flex items-center;
	}

	.nav-logo {
		@apply h-10 w-10 mr-4;
	}

	.nav-logo-text {
		@apply hidden text-4xl font-black leading-none tracking-wide
	}


	.nav-burger {
		@apply z-50 relative transition-colors duration-100;
	}

	.nav-burger:focus {
		@apply outline-none;
	}


	.nav-right {
		@apply h-10 hidden items-center;
	}

	.nav-link {
		@apply text-xl font-bold border-b-2 border-transparent transition-colors duration-100;
	}

	.nav-link:hover, .nav-burger:hover {
		@apply text-gray-800;
	}

	.nav.inverted-color .nav-link:hover, .nav.inverted-color .nav-burger:hover {
		@apply text-gray-200;
	}

	.nav-link:active, .nav-burger:active {
		@apply text-gray-500;
	}

	.nav.inverted-color .nav-link:active, .nav.inverted-color .nav-burger:active {
		@apply text-gray-300;
	}

	.nav-link.active {
		@apply border-gray-400;
	}

	.nav.inverted-color .nav-link.active {
		@apply border-gray-200;
	}


	.nav-menu {
		@apply flex flex-col justify-center items-end;
	}

	.nav-menu-link {
		@apply my-4 text-right text-3xl font-bold transition-colors duration-100;
	}


	@screen xs {
		.nav-logo-text {
			@apply block;
		}
	}

	@screen sm {
		.nav-right {
			@apply flex;
		}

		.nav-burger {
			@apply hidden;
		}

		.nav-menu {
			@apply hidden;
		}
	}
</style>